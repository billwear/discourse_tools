{'id': 3812, 'name': 'Bill Wear', 'username': 'billwear', 'avatar_template': '/letter_avatar/billwear/{size}/5_6d6f4cde2641c35611d5cac2fb97c77e.png', 'created_at': '2020-07-21T23:59:33.260Z', 'cooked': '<p>The MAAS CLI can do everything that the web UI can do, and more. Yes, it really, really can. The CLI uses the <code>maas</code> command exclusively which, in turn, connects to the API.  This page explains what is needed to get started with the CLI.</p>\n<p>Note that this article does not provide complete coverage of the MAAS CLI. For an exhaustive treatment, you may want to see the <a href="https://maas.io/docs/api" rel="nofollow noopener">API documentation</a>.  Also note that this page represents user-entered values as uppercase variables preceded with the ‘$’ character (e.g. $PROFILE and $EMAIL_ADDRESS). You should replace these placeholders with actual values.</p>\n<h4>Quick questions you may have:</h4>\n<ul>\n<li><a href="/t/maas-cli/802#heading--the-maas-command">How do I access the MAAS CLI?</a></li>\n<li><a href="/t/maas-cli/802#heading--create-an-administrator">How do I create an administrator account?</a></li>\n<li><a href="/t/maas-cli/802#heading--log-in-required">How do I complete the required login?</a></li>\n<li><a href="/t/maas-cli/802#heading--get-help">How do I get help via the CLI?</a></li>\n<li><a href="/t/maas-cli/802#heading--log-out">How do I log out?</a></li>\n<li><a href="/t/maas-cli/802#heading--next-steps">What are some the next steps I can take with the CLI?</a></li>\n</ul>\n<h2 id="heading--the-maas-command">The maas command</h2>\n<p>You can obtain the <code>maas</code> command via the <code>maas-cli</code> Ubuntu package installed on every region API server and rack controller. To manage MAAS at the CLI level from a remote workstation, you will need to install this package:</p>\n<pre><code class="lang-bash">sudo apt install maas-cli\n</code></pre>\n<h2 id="heading--create-an-administrator">Create an administrator</h2>\n<p>MAAS requires an initial administrator, sometimes called a MAAS “superuser”. When you access the web UI for the first time, you will be prompted to create this user:</p>\n<pre><code class="lang-bash">sudo maas createadmin --username=$PROFILE --email=$EMAIL_ADDRESS\n</code></pre>\n<p>You can create extra administrators in the same way. See <a href="/t/common-cli-tasks/794#heading--create-a-regular-user">MAAS CLI - common tasks</a> for instructions on creating regular users with the CLI.</p>\n<h2 id="heading--log-in-required">Log in (required)</h2>\n<p>To use the CLI you must first log in to the API server (region controller).</p>\n<p>You will need the API key that MAAS generated when creating your MAAS account. To obtain it, run this command on the region controller (i.e. wherever you installed the ‘maas-region-controller’ package):</p>\n<pre><code class="lang-bash">sudo maas-region apikey --username=$PROFILE &gt; $API_KEY_FILE\n</code></pre>\n<div class="p-notification">\n<p class="p-notification__response">You can obtain a user’s API key from the web interface. Click on ‘username’ in the top right corner, and select ‘Account’.</p>\n</div>\n<p>Log in. MAAS will prompt you for the API key:</p>\n<pre><code class="lang-bash">maas login $PROFILE $MAAS_URL\n</code></pre>\n<p>For example, to log in with the account whose username is ‘admin’ and where the region controller is on the localhost:</p>\n<pre><code class="lang-bash">maas login admin http://localhost:5240/MAAS/api/2.0\n</code></pre>\n<p>To log in by referring to the API key file created earlier:</p>\n<pre><code class="lang-bash">maas login $PROFILE $MAAS_URL - &lt; $API_KEY_FILE\n</code></pre>\n<p>A handy shell script, say <code>maas-login.sh</code>, is provided:</p>\n<pre><code class="lang-auto">#!/bin/sh\n\n# Change these 3 values as required \nPROFILE=admin\nAPI_KEY_FILE=/home/ubuntu/tmp/api_key\nAPI_SERVER=localhost\n\nMAAS_URL=http://$API_SERVER/MAAS/api/2.0\n\nmaas login $PROFILE $MAAS_URL - &lt; $API_KEY_FILE\n</code></pre>\n<h2 id="heading--get-help">Get help</h2>\n<p>MAAS has a thorough built-in help reference, which you can access in stages to understand how to build commands.</p>\n<p>The <code>maas</code> command accepts the <code>-h</code> or <code>--help</code> argument after every keyword and will display results with increasing detail.</p>\n<p>For example, suppose you were interested in tag management but didn’t know where to start. You might try this:</p>\n<pre><code class="lang-bash">maas $PROFILE --help\n</code></pre>\n<p>At this stage, you’ll see all available MAAS commands, including the <code>tag</code> and <code>tags</code> commands, along with a brief explanation of what each command does. To see what the <code>tag</code> and <code>tags</code> commands have to offer, try:</p>\n<pre><code class="lang-bash">maas $PROFILE tag --help\n</code></pre>\n<p>And:</p>\n<pre><code class="lang-bash">maas $PROFILE tags --help\n</code></pre>\n<p>Suppose you want to create a new rudimentary tag. Find the next level of help like this:</p>\n<pre><code class="lang-bash">maas admin tags create --help\n</code></pre>\n<p>In this way, you can discover all that the MAAS CLI has to offer.</p>\n<h2 id="heading--log-out">Log out</h2>\n<p>Once you finish with the CLI, you can log out from the given profile, flushing the stored credentials.</p>\n<pre><code class="lang-bash">maas logout $PROFILE\n</code></pre>\n<h2 id="heading--next-steps">Next steps</h2>\n<p>The following categories are now available to be explored:</p>\n<ul>\n<li><a href="/t/common-cli-tasks/794">Common tasks</a></li>\n<li><a href="/t/cli-kernel-management/799">Kernel management</a></li>\n<li><a href="/t/cli-image-management/797">Image management</a></li>\n<li><a href="/t/cli-tag-management/801">Tag management</a></li>\n<li><a href="/t/cli-dhcp-snippet-management/796">DHCP snippet management</a></li>\n<li><a href="/t/cli-advanced-tasks/793">Advanced tasks</a></li>\n<li><a href="/t/cli-composable-hardware/795">Composable hardware</a></li>\n</ul>', 'post_number': 1, 'post_type': 1, 'updated_at': '2020-07-22T21:44:54.317Z', 'reply_count': 0, 'reply_to_post_number': None, 'quote_count': 0, 'incoming_link_count': 0, 'reads': 1, 'score': 0.2, 'yours': True, 'topic_id': 1928, 'topic_slug': 'test-article-post', 'display_username': 'Bill Wear', 'primary_group_name': None, 'primary_group_flair_url': None, 'primary_group_flair_bg_color': None, 'primary_group_flair_color': None, 'version': 2, 'can_edit': True, 'can_delete': False, 'can_recover': None, 'can_wiki': True, 'user_title': None, 'raw': 'The MAAS CLI can do everything that the web UI can do, and more. Yes, it really, really can. The CLI uses the `maas` command exclusively which, in turn, connects to the API.  This page explains what is needed to get started with the CLI.\n\nNote that this article does not provide complete coverage of the MAAS CLI. For an exhaustive treatment, you may want to see the [API documentation](https://maas.io/docs/api).  Also note that this page represents user-entered values as uppercase variables preceded with the \'$\' character (e.g. $PROFILE and $EMAIL_ADDRESS). You should replace these placeholders with actual values.\n\n#### Quick questions you may have:\n\n* [How do I access the MAAS CLI?](/t/maas-cli/802#heading--the-maas-command)\n* [How do I create an administrator account?](/t/maas-cli/802#heading--create-an-administrator)\n* [How do I complete the required login?](/t/maas-cli/802#heading--log-in-required)\n* [How do I get help via the CLI?](/t/maas-cli/802#heading--get-help)\n* [How do I log out?](/t/maas-cli/802#heading--log-out)\n* [What are some the next steps I can take with the CLI?](/t/maas-cli/802#heading--next-steps)\n\n<h2 id="heading--the-maas-command">The maas command</h2>\n\nYou can obtain the `maas` command via the `maas-cli` Ubuntu package installed on every region API server and rack controller. To manage MAAS at the CLI level from a remote workstation, you will need to install this package:\n\n``` bash\nsudo apt install maas-cli\n```\n\n<h2 id="heading--create-an-administrator">Create an administrator</h2>\n\nMAAS requires an initial administrator, sometimes called a MAAS "superuser". When you access the web UI for the first time, you will be prompted to create this user:\n\n``` bash\nsudo maas createadmin --username=$PROFILE --email=$EMAIL_ADDRESS\n```\n\nYou can create extra administrators in the same way. See [MAAS CLI - common tasks](/t/common-cli-tasks/794#heading--create-a-regular-user) for instructions on creating regular users with the CLI.\n\n<h2 id="heading--log-in-required">Log in (required)</h2>\n\nTo use the CLI you must first log in to the API server (region controller).\n\nYou will need the API key that MAAS generated when creating your MAAS account. To obtain it, run this command on the region controller (i.e. wherever you installed the \'maas-region-controller\' package):\n\n``` bash\nsudo maas-region apikey --username=$PROFILE > $API_KEY_FILE\n```\n\n[note]\nYou can obtain a user\'s API key from the web interface. Click on \'username\' in the top right corner, and select \'Account\'.\n[/note]\n\nLog in. MAAS will prompt you for the API key:\n\n``` bash\nmaas login $PROFILE $MAAS_URL\n```\n\nFor example, to log in with the account whose username is \'admin\' and where the region controller is on the localhost:\n\n``` bash\nmaas login admin http://localhost:5240/MAAS/api/2.0\n```\n\nTo log in by referring to the API key file created earlier:\n\n``` bash\nmaas login $PROFILE $MAAS_URL - < $API_KEY_FILE\n```\n\nA handy shell script, say `maas-login.sh`, is provided:\n\n``` no-highlight\n#!/bin/sh\n\n# Change these 3 values as required \nPROFILE=admin\nAPI_KEY_FILE=/home/ubuntu/tmp/api_key\nAPI_SERVER=localhost\n\nMAAS_URL=http://$API_SERVER/MAAS/api/2.0\n\nmaas login $PROFILE $MAAS_URL - < $API_KEY_FILE\n```\n\n<h2 id="heading--get-help">Get help</h2>\n\nMAAS has a thorough built-in help reference, which you can access in stages to understand how to build commands.\n\nThe `maas` command accepts the `-h` or `--help` argument after every keyword and will display results with increasing detail.\n\nFor example, suppose you were interested in tag management but didn\'t know where to start. You might try this:\n\n``` bash\nmaas $PROFILE --help\n```\n\nAt this stage, you\'ll see all available MAAS commands, including the `tag` and `tags` commands, along with a brief explanation of what each command does. To see what the `tag` and `tags` commands have to offer, try:\n\n``` bash\nmaas $PROFILE tag --help\n```\n\nAnd:\n\n``` bash\nmaas $PROFILE tags --help\n```\n\nSuppose you want to create a new rudimentary tag. Find the next level of help like this:\n\n``` bash\nmaas admin tags create --help\n```\n\nIn this way, you can discover all that the MAAS CLI has to offer.\n\n<h2 id="heading--log-out">Log out</h2>\n\nOnce you finish with the CLI, you can log out from the given profile, flushing the stored credentials.\n\n``` bash\nmaas logout $PROFILE\n```\n\n<h2 id="heading--next-steps">Next steps</h2>\n\nThe following categories are now available to be explored:\n\n-   [Common tasks](/t/common-cli-tasks/794)\n-   [Kernel management](/t/cli-kernel-management/799)\n-   [Image management](/t/cli-image-management/797)\n-   [Tag management](/t/cli-tag-management/801)\n-   [DHCP snippet management](/t/cli-dhcp-snippet-management/796)\n-   [Advanced tasks](/t/cli-advanced-tasks/793)\n-   [Composable hardware](/t/cli-composable-hardware/795)\n\n<!-- LINKS -->', 'actions_summary': [{'id': 3, 'can_act': True}, {'id': 4, 'can_act': True}, {'id': 8, 'can_act': True}, {'id': 7, 'can_act': True}], 'moderator': True, 'admin': True, 'staff': True, 'user_id': 287, 'hidden': False, 'trust_level': 4, 'deleted_at': None, 'user_deleted': False, 'edit_reason': None, 'can_view_edit_history': True, 'wiki': False, 'reviewable_id': None, 'reviewable_score_count': 0, 'reviewable_score_pending_count': 0, 'can_accept_answer': False, 'can_unaccept_answer': False, 'accepted_answer': False}